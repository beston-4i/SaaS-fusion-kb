# Cross-Module Report Templates

**Purpose:** Ready-to-use SQL skeletons for cross-module integration reports.

---

## 1. Account Analysis Report (GL + AP + AR + FA)
*Comprehensive GL account analysis with source document drill-down.*

```sql
/*
TITLE: Account Analysis Report
PURPOSE: Analyze GL account activity by source module
AUTHOR: AI Generation Code
DATE: 22-12-25
MODULES: GL, AP, AR, FA
*/

WITH 
-- GL Journal Entries
GL_ENTRIES AS (
    SELECT /*+ qb_name(GL_ENT) MATERIALIZE */
           GJH.JE_HEADER_ID
          ,GJH.NAME JE_NAME
          ,GJH.PERIOD_NAME
          ,GJH.JE_SOURCE
          ,GJH.JE_CATEGORY
          ,GJH.POSTED_DATE
          ,GJL.JE_LINE_NUM
          ,GJL.CODE_COMBINATION_ID
          ,GCCK.CONCATENATED_SEGMENTS ACCOUNT_STRING
          ,GJL.ENTERED_DR
          ,GJL.ENTERED_CR
          ,GJL.ACCOUNTED_DR
          ,GJL.ACCOUNTED_CR
          ,GJL.DESCRIPTION
          ,GJL.GL_SL_LINK_ID
          ,GJL.GL_SL_LINK_TABLE
    FROM   GL_JE_HEADERS GJH
          ,GL_JE_LINES GJL
          ,GL_CODE_COMBINATIONS_KFV GCCK
    WHERE  GJH.JE_HEADER_ID = GJL.JE_HEADER_ID
      AND  GJL.CODE_COMBINATION_ID = GCCK.CODE_COMBINATION_ID
      AND  GJH.STATUS = 'P'
      AND  GJH.LEDGER_ID = :P_LEDGER_ID
      AND  TRUNC(GJH.POSTED_DATE) BETWEEN :P_FROM_DATE AND :P_TO_DATE
      AND  (GCCK.SEGMENT4 IN (:P_ACCOUNT) OR 'All' IN (:P_ACCOUNT || 'All'))
),
-- AP Source Documents
AP_SOURCE AS (
    SELECT /*+ qb_name(AP_SRC) */
           XAL.AE_LINE_NUM
          ,XAH.AE_HEADER_ID
          ,'AP Invoice' SOURCE_TYPE
          ,AIA.INVOICE_NUM SOURCE_NUMBER
          ,AIA.INVOICE_DATE SOURCE_DATE
          ,POS.VENDOR_NAME PARTY_NAME
          ,AID.AMOUNT SOURCE_AMOUNT
          ,XAL.ACCOUNTED_DR
          ,XAL.ACCOUNTED_CR
    FROM   XLA_AE_HEADERS XAH
          ,XLA_AE_LINES XAL
          ,XLA_DISTRIBUTION_LINKS XDL
          ,AP_INVOICE_DISTRIBUTIONS_ALL AID
          ,AP_INVOICES_ALL AIA
          ,POZ_SUPPLIERS_V POS
    WHERE  XAH.AE_HEADER_ID = XAL.AE_HEADER_ID
      AND  XAL.APPLICATION_ID = 200
      AND  XAL.AE_HEADER_ID = XDL.AE_HEADER_ID
      AND  XAL.AE_LINE_NUM = XDL.AE_LINE_NUM
      AND  XDL.SOURCE_DISTRIBUTION_ID_NUM_1 = AID.INVOICE_DISTRIBUTION_ID
      AND  AID.INVOICE_ID = AIA.INVOICE_ID
      AND  AIA.VENDOR_ID = POS.VENDOR_ID(+)
),
-- AR Source Documents
AR_SOURCE AS (
    SELECT /*+ qb_name(AR_SRC) */
           XAL.AE_LINE_NUM
          ,XAH.AE_HEADER_ID
          ,'AR Transaction' SOURCE_TYPE
          ,RCTA.TRX_NUMBER SOURCE_NUMBER
          ,RCTA.TRX_DATE SOURCE_DATE
          ,HP.PARTY_NAME PARTY_NAME
          ,RCTLGD.AMOUNT SOURCE_AMOUNT
          ,XAL.ACCOUNTED_DR
          ,XAL.ACCOUNTED_CR
    FROM   XLA_AE_HEADERS XAH
          ,XLA_AE_LINES XAL
          ,XLA_DISTRIBUTION_LINKS XDL
          ,RA_CUST_TRX_LINE_GL_DIST_ALL RCTLGD
          ,RA_CUSTOMER_TRX_ALL RCTA
          ,HZ_CUST_ACCOUNTS HCA
          ,HZ_PARTIES HP
    WHERE  XAH.AE_HEADER_ID = XAL.AE_HEADER_ID
      AND  XAL.APPLICATION_ID = 222
      AND  XAL.AE_HEADER_ID = XDL.AE_HEADER_ID
      AND  XAL.AE_LINE_NUM = XDL.AE_LINE_NUM
      AND  XDL.SOURCE_DISTRIBUTION_ID_NUM_1 = RCTLGD.CUST_TRX_LINE_GL_DIST_ID
      AND  RCTLGD.CUSTOMER_TRX_ID = RCTA.CUSTOMER_TRX_ID
      AND  RCTA.BILL_TO_CUSTOMER_ID = HCA.CUST_ACCOUNT_ID(+)
      AND  HCA.PARTY_ID = HP.PARTY_ID(+)
),
-- FA Source Documents
FA_SOURCE AS (
    SELECT /*+ qb_name(FA_SRC) */
           XAL.AE_LINE_NUM
          ,XAH.AE_HEADER_ID
          ,'FA Transaction' SOURCE_TYPE
          ,FAB.ASSET_NUMBER SOURCE_NUMBER
          ,FTH.TRANSACTION_DATE_ENTERED SOURCE_DATE
          ,FAT.DESCRIPTION PARTY_NAME
          ,FADJ.ADJUSTMENT_AMOUNT SOURCE_AMOUNT
          ,XAL.ACCOUNTED_DR
          ,XAL.ACCOUNTED_CR
    FROM   XLA_AE_HEADERS XAH
          ,XLA_AE_LINES XAL
          ,XLA_DISTRIBUTION_LINKS XDL
          ,FA_ADJUSTMENTS FADJ
          ,FA_TRANSACTION_HEADERS FTH
          ,FA_ADDITIONS_B FAB
          ,FA_ADDITIONS_TL FAT
    WHERE  XAH.AE_HEADER_ID = XAL.AE_HEADER_ID
      AND  XAL.APPLICATION_ID = 140
      AND  XAL.AE_HEADER_ID = XDL.AE_HEADER_ID
      AND  XAL.AE_LINE_NUM = XDL.AE_LINE_NUM
      AND  XDL.SOURCE_DISTRIBUTION_ID_NUM_1 = FADJ.ADJUSTMENT_ID
      AND  FADJ.TRANSACTION_HEADER_ID = FTH.TRANSACTION_HEADER_ID
      AND  FADJ.ASSET_ID = FAB.ASSET_ID
      AND  FAB.ASSET_ID = FAT.ASSET_ID
      AND  FAT.LANGUAGE = USERENV('LANG')
)
-- Final Union
SELECT GLE.JE_NAME
      ,GLE.PERIOD_NAME
      ,GLE.JE_SOURCE
      ,GLE.JE_CATEGORY
      ,GLE.POSTED_DATE
      ,GLE.ACCOUNT_STRING
      ,GLE.JE_LINE_NUM
      ,GLE.DESCRIPTION
      ,GLE.ACCOUNTED_DR
      ,GLE.ACCOUNTED_CR
      -- Source Document Details
      ,COALESCE(APS.SOURCE_TYPE, ARS.SOURCE_TYPE, FAS.SOURCE_TYPE, 'Manual Journal') SOURCE_TYPE
      ,COALESCE(APS.SOURCE_NUMBER, ARS.SOURCE_NUMBER, FAS.SOURCE_NUMBER, NULL) SOURCE_NUMBER
      ,COALESCE(APS.SOURCE_DATE, ARS.SOURCE_DATE, FAS.SOURCE_DATE, NULL) SOURCE_DATE
      ,COALESCE(APS.PARTY_NAME, ARS.PARTY_NAME, FAS.PARTY_NAME, NULL) PARTY_NAME
      ,COALESCE(APS.SOURCE_AMOUNT, ARS.SOURCE_AMOUNT, FAS.SOURCE_AMOUNT, NULL) SOURCE_AMOUNT
FROM   GL_ENTRIES GLE
      ,GL_IMPORT_REFERENCES GIR
      ,AP_SOURCE APS
      ,AR_SOURCE ARS
      ,FA_SOURCE FAS
WHERE  GLE.GL_SL_LINK_ID = GIR.GL_SL_LINK_ID(+)
  AND  GLE.GL_SL_LINK_TABLE = GIR.GL_SL_LINK_TABLE(+)
  AND  GIR.JE_HEADER_ID = APS.AE_HEADER_ID(+)
  AND  GIR.JE_LINE_NUM = APS.AE_LINE_NUM(+)
  AND  GIR.JE_HEADER_ID = ARS.AE_HEADER_ID(+)
  AND  GIR.JE_LINE_NUM = ARS.AE_LINE_NUM(+)
  AND  GIR.JE_HEADER_ID = FAS.AE_HEADER_ID(+)
  AND  GIR.JE_LINE_NUM = FAS.AE_LINE_NUM(+)
ORDER BY GLE.POSTED_DATE, GLE.JE_NAME, GLE.JE_LINE_NUM
```

---

## 2. Sales Order Analysis (OM + AR + CM)
*Order to Cash analysis with receipt tracking.*

```sql
/*
TITLE: Sales Order Analysis Report
PURPOSE: Complete order to cash tracking
AUTHOR: AI Generation Code
DATE: 22-12-25
MODULES: OM, AR, CM
*/

WITH 
-- Order Details
ORDER_DATA AS (
    SELECT /*+ qb_name(ORD_DATA) MATERIALIZE */
           OEH.HEADER_ID
          ,OEH.ORDER_NUMBER
          ,OEH.ORDERED_DATE
          ,OEH.FLOW_STATUS_CODE ORDER_STATUS
          ,HP.PARTY_NAME CUSTOMER_NAME
          ,HCA.ACCOUNT_NUMBER CUSTOMER_NUMBER
          -- Line Details
          ,OEL.LINE_ID
          ,OEL.LINE_NUMBER
          ,OEL.ORDERED_ITEM
          ,MSI.DESCRIPTION ITEM_DESCRIPTION
          ,OEL.ORDERED_QUANTITY
          ,OEL.UNIT_SELLING_PRICE
          ,OEL.ORDERED_QUANTITY * OEL.UNIT_SELLING_PRICE LINE_AMOUNT
          ,OEL.FLOW_STATUS_CODE LINE_STATUS
    FROM   OE_ORDER_HEADERS_ALL OEH
          ,OE_ORDER_LINES_ALL OEL
          ,HZ_CUST_ACCOUNTS HCA
          ,HZ_PARTIES HP
          ,MTL_SYSTEM_ITEMS_B MSI
    WHERE  OEH.HEADER_ID = OEL.HEADER_ID
      AND  OEH.SOLD_TO_ORG_ID = HCA.CUST_ACCOUNT_ID
      AND  HCA.PARTY_ID = HP.PARTY_ID
      AND  OEL.INVENTORY_ITEM_ID = MSI.INVENTORY_ITEM_ID(+)
      AND  OEL.SHIP_FROM_ORG_ID = MSI.ORGANIZATION_ID(+)
      AND  TRUNC(OEH.ORDERED_DATE) BETWEEN :P_FROM_DATE AND :P_TO_DATE
      AND  OEH.ORG_ID = :P_ORG_ID
),
-- Invoice Details
INVOICE_DATA AS (
    SELECT /*+ qb_name(INV_DATA) */
           TO_NUMBER(RCTL.INTERFACE_LINE_ATTRIBUTE6) LINE_ID
          ,RCTA.CUSTOMER_TRX_ID
          ,RCTA.TRX_NUMBER INVOICE_NUMBER
          ,RCTA.TRX_DATE INVOICE_DATE
          ,RCTL.EXTENDED_AMOUNT INVOICED_AMOUNT
    FROM   RA_CUSTOMER_TRX_ALL RCTA
          ,RA_CUSTOMER_TRX_LINES_ALL RCTL
    WHERE  RCTA.CUSTOMER_TRX_ID = RCTL.CUSTOMER_TRX_ID
      AND  RCTL.LINE_TYPE = 'LINE'
      AND  RCTA.COMPLETE_FLAG = 'Y'
      AND  RCTL.INTERFACE_LINE_ATTRIBUTE6 IS NOT NULL
),
-- Receipt/Payment Details
RECEIPT_DATA AS (
    SELECT /*+ qb_name(RCPT_DATA) */
           ARA.APPLIED_CUSTOMER_TRX_ID CUSTOMER_TRX_ID
          ,ACRA.RECEIPT_NUMBER
          ,ACRA.RECEIPT_DATE
          ,SUM(ARA.AMOUNT_APPLIED) RECEIPT_AMOUNT
    FROM   AR_CASH_RECEIPTS_ALL ACRA
          ,AR_RECEIVABLE_APPLICATIONS_ALL ARA
    WHERE  ACRA.CASH_RECEIPT_ID = ARA.CASH_RECEIPT_ID
      AND  ARA.STATUS = 'APP'
      AND  NVL(ARA.DISPLAY, 'Y') = 'Y'
      -- Exclude Reversed Receipts
      AND  NOT EXISTS (
           SELECT 1 
           FROM   AR_CASH_RECEIPT_HISTORY_ALL H
           WHERE  H.CASH_RECEIPT_ID = ACRA.CASH_RECEIPT_ID
             AND  H.STATUS = 'REVERSED'
      )
    GROUP BY ARA.APPLIED_CUSTOMER_TRX_ID, ACRA.RECEIPT_NUMBER, ACRA.RECEIPT_DATE
)
-- Final Selection
SELECT OD.ORDER_NUMBER
      ,OD.ORDERED_DATE
      ,OD.ORDER_STATUS
      ,OD.CUSTOMER_NAME
      ,OD.CUSTOMER_NUMBER
      ,OD.LINE_NUMBER
      ,OD.ORDERED_ITEM
      ,OD.ITEM_DESCRIPTION
      ,OD.ORDERED_QUANTITY
      ,OD.UNIT_SELLING_PRICE
      ,OD.LINE_AMOUNT ORDER_AMOUNT
      ,ID.INVOICE_NUMBER
      ,ID.INVOICE_DATE
      ,ID.INVOICED_AMOUNT
      ,RD.RECEIPT_NUMBER
      ,RD.RECEIPT_DATE
      ,RD.RECEIPT_AMOUNT
      -- Outstanding Analysis
      ,OD.LINE_AMOUNT - NVL(ID.INVOICED_AMOUNT, 0) UNBILLED_AMOUNT
      ,ID.INVOICED_AMOUNT - NVL(RD.RECEIPT_AMOUNT, 0) OUTSTANDING_AMOUNT
FROM   ORDER_DATA OD
      ,INVOICE_DATA ID
      ,RECEIPT_DATA RD
WHERE  OD.LINE_ID = ID.LINE_ID(+)
  AND  ID.CUSTOMER_TRX_ID = RD.CUSTOMER_TRX_ID(+)
  AND  (OD.CUSTOMER_NAME IN (:P_CUSTOMER) OR 'All' IN (:P_CUSTOMER || 'All'))
ORDER BY OD.ORDERED_DATE, OD.ORDER_NUMBER, OD.LINE_NUMBER
```

---

## 3. Sales Tax Register (AR + AP + Tax)
*Comprehensive tax reporting with collected and paid tracking.*

```sql
/*
TITLE: Sales Tax Register
PURPOSE: Tax collected (AR) and paid (AP) analysis
AUTHOR: AI Generation Code
DATE: 22-12-25
MODULES: AR, AP, Tax
*/

WITH 
-- Sales Tax Collected (AR)
SALES_TAX AS (
    SELECT /*+ qb_name(SALES_TAX) MATERIALIZE */
           'Sales Tax' TAX_TYPE
          ,RCTA.TRX_NUMBER TRANSACTION_NUMBER
          ,RCTA.TRX_DATE TRANSACTION_DATE
          ,HP.PARTY_NAME PARTY_NAME
          ,ZL.TAX_REGIME_CODE
          ,ZL.TAX
          ,ZL.TAX_STATUS_CODE
          ,ZL.TAX_RATE_CODE
          ,ZR.TAX_RATE
          ,ZL.TAXABLE_AMT TAXABLE_AMOUNT
          ,ZL.TAX_AMT TAX_AMOUNT
          ,RCTA.INVOICE_CURRENCY_CODE CURRENCY_CODE
          ,NVL(RCTA.EXCHANGE_RATE, 1) EXCHANGE_RATE
          ,ZL.TAX_AMT * NVL(RCTA.EXCHANGE_RATE, 1) FUNCTIONAL_TAX_AMOUNT
    FROM   ZX_LINES ZL
          ,RA_CUSTOMER_TRX_ALL RCTA
          ,HZ_CUST_ACCOUNTS HCA
          ,HZ_PARTIES HP
          ,ZX_RATES_B ZR
    WHERE  ZL.APPLICATION_ID = 222
      AND  ZL.ENTITY_CODE = 'TRANSACTIONS'
      AND  ZL.TRX_ID = RCTA.CUSTOMER_TRX_ID
      AND  RCTA.BILL_TO_CUSTOMER_ID = HCA.CUST_ACCOUNT_ID
      AND  HCA.PARTY_ID = HP.PARTY_ID
      AND  ZL.TAX_RATE_ID = ZR.TAX_RATE_ID(+)
      AND  RCTA.COMPLETE_FLAG = 'Y'
      AND  TRUNC(RCTA.TRX_DATE) BETWEEN :P_FROM_DATE AND :P_TO_DATE
    
    UNION ALL
    
    -- Purchase Tax Paid (AP)
    SELECT 'Purchase Tax' TAX_TYPE
          ,AIA.INVOICE_NUM
          ,AIA.INVOICE_DATE
          ,POS.VENDOR_NAME
          ,ZL.TAX_REGIME_CODE
          ,ZL.TAX
          ,ZL.TAX_STATUS_CODE
          ,ZL.TAX_RATE_CODE
          ,ZR.TAX_RATE
          ,ZL.TAXABLE_AMT
          ,ZL.TAX_AMT
          ,AIA.INVOICE_CURRENCY_CODE
          ,NVL(AIA.EXCHANGE_RATE, 1)
          ,ZL.TAX_AMT * NVL(AIA.EXCHANGE_RATE, 1)
    FROM   ZX_LINES ZL
          ,AP_INVOICES_ALL AIA
          ,POZ_SUPPLIERS_V POS
          ,ZX_RATES_B ZR
    WHERE  ZL.APPLICATION_ID = 200
      AND  ZL.ENTITY_CODE = 'AP_INVOICES'
      AND  ZL.TRX_ID = AIA.INVOICE_ID
      AND  AIA.VENDOR_ID = POS.VENDOR_ID
      AND  ZL.TAX_RATE_ID = ZR.TAX_RATE_ID(+)
      AND  AIA.CANCELLED_DATE IS NULL
      AND  TRUNC(AIA.INVOICE_DATE) BETWEEN :P_FROM_DATE AND :P_TO_DATE
)
-- Final Selection
SELECT TAX_TYPE
      ,TRANSACTION_NUMBER
      ,TRANSACTION_DATE
      ,PARTY_NAME
      ,TAX_REGIME_CODE
      ,TAX TAX_NAME
      ,TAX_STATUS_CODE
      ,TAX_RATE_CODE
      ,TAX_RATE
      ,TAXABLE_AMOUNT
      ,TAX_AMOUNT
      ,CURRENCY_CODE
      ,FUNCTIONAL_TAX_AMOUNT
      -- Summary by Tax Type
      ,SUM(FUNCTIONAL_TAX_AMOUNT) OVER (PARTITION BY TAX_TYPE) TAX_TYPE_TOTAL
FROM   SALES_TAX
WHERE  (TAX_REGIME_CODE IN (:P_TAX_REGIME) OR 'All' IN (:P_TAX_REGIME || 'All'))
ORDER BY TAX_TYPE, TRANSACTION_DATE, TRANSACTION_NUMBER
```

---


